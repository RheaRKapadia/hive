<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HIVE Dashboard</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body class="dashboard-page">
    <header>
        <div class="logo">
            <h1>HIVE</h1>
        </div>
        <nav>
            <div class="user-menu">
                <img src="path_to_user_avatar.jpg" alt="User Avatar" class="avatar">
                <span>Menu</span>
            </div>
        </nav>
    </header>

    <main class="dashboard-content">
        <section class="welcome-section">
            <h2>Welcome back, <%= user.firstName %>!</h2>
            <div id="quote-container" class="quote">
                <p id="quote-text">Loading quote...</p>
                <span id="quote-author" class="author"></span>
            </div>
        </section>

        <section class="workouts-section">
            <h2>Workouts</h2>
            <div id="workout-calendar" class="workout-calendar">
                <div class="loading">Loading workout data...</div>
            </div>
        </section>

        <section class="health-section">
            <h2>Health</h2>
            <div id="health-data" class="health-data">
                <div class="loading">Loading health data...</div>
            </div>
        </section>

        <section class="locations-section">
            <h2>Locations</h2>
            <div id="location-data" class="location-data">
                <div class="loading">Loading location data...</div>
            </div>
        </section>

        <section class="workouts-list-section">
            <h2>Workouts</h2>
            <div id="workouts-list" class="workouts-list">
                <div class="loading">Loading workouts...</div>
            </div>
        </section>
    </main>

    <nav class="side-menu">
        <ul>
            <li><a href="/user/workouts">Workouts</a></li>
            <li><a href="/user/routines">Routines</a></li>
            <li><a href="/user/painpoints">Pain Management</a></li>
            <li><a href="/user/locations">Locations</a></li>
        </ul>
    </nav>

    <script src="./js/dashboard.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const quoteText = document.getElementById('quote-text');
            const quoteAuthor = document.getElementById('quote-author');

            async function fetchAndDisplayQuote() {
                const today = new Date().toDateString();
                const cachedQuote = localStorage.getItem('dailyQuote');
                const cachedDate = localStorage.getItem('dailyQuoteDate');

                if (cachedQuote && cachedDate === today) {
                    const { content, author } = JSON.parse(cachedQuote);
                    quoteText.textContent = `"${content}"`;
                    quoteAuthor.textContent = author;
                } else {
                    try {
                        const response = await fetch('https://api.quotable.io/random?tags=inspirational');
                        if (!response.ok) {
                            throw new Error('Failed to fetch quote');
                        }
                        const data = await response.json();
                        quoteText.textContent = `"${data.content}"`;
                        quoteAuthor.textContent = data.author;
                        localStorage.setItem('dailyQuote', JSON.stringify({ content: data.content, author: data.author }));
                        localStorage.setItem('dailyQuoteDate', today);
                    } catch (error) {
                        console.error('Error fetching quote:', error);
                        quoteText.textContent = 'Failed to load quote. Please try again later.';
                        quoteAuthor.textContent = '';
                    }
                }
            }

            fetchAndDisplayQuote();
        });
    </script>
</body>
</html>
